"0","rubble_electivity <- day6_settlement %>%"
"0","  mutate(total = bare + cca + ram + spon) %>% #get total settlers"
"0","  group_by(container, rubble_type) %>%"
"0","  summarize(total = sum(total)) %>% #arrange data organized by container and rubble type"
"0","  pivot_wider(names_from = rubble_type, values_from = total) %>% #widen the table"
"0","  merge(., rubble_area, by = ""container"") %>% #add the rubble_area df"
"0","  mutate(bare = bare.x/bare.y,"
"0","         cca = cca.x/cca.y,"
"0","         ram = ram.x/ram.y) %>% #calculate density of settlers on each substratum"
"0","  mutate(bare_a = bare / (bare + cca + ram),"
"0","         cca_a = cca / (bare + cca + ram),"
"0","         ram_a = ram / (bare + cca + ram)) %>% #calculate Chesson's alpha"
"0","  mutate(bare_e = (bare_a - 1 / rubble_types) / (bare_a + 1 / rubble_types),"
"0","         cca_e = (cca_a - 1 / rubble_types) / (cca_a + 1 / rubble_types),"
"0","         ram_e = (ram_a - 1 / rubble_types) / (ram_a + 1 / rubble_types)) %>% #calculate electivities"
"0","  select(ends_with(c(""container"", ""e"")), -bare) %>% #remove extraneous columns"
"0","  drop_na() #drop na's (the three containers that only have one rubble type)"
"1","`summarise()` has grouped output by 'container'. You can override using the `.groups` argument.
"
