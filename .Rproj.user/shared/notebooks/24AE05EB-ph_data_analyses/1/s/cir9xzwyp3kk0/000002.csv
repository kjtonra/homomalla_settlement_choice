"0","patch_electivity <- day6_settlement %>%"
"0","  group_by(container) %>%"
"0","  summarize(bare = sum(bare),"
"0","            cca = sum(cca),"
"0","            ram = sum(ram),"
"0","            spon = sum(spon)) %>%"
"0","  merge(., patch_type_area, by = ""container"") %>% #add the rubble_area df"
"0","  mutate(bare = bare.x/bare.y,"
"0","         cca = cca.x/cca.y,"
"0","         ram = ram.x/ram.y,"
"0","         spon = spon.x/spon.y) %>% #calculate density of settlers on each substratum"
"0","  mutate(bare_a = bare / (bare + cca + ram + spon),"
"0","         cca_a = cca / (bare + cca + ram + spon),"
"0","         ram_a = ram / (bare + cca + ram + spon),"
"0","         spon_a = spon / (bare + cca + ram + spon)) %>% #calculate Chesson's alpha"
"0","  mutate(bare_e = (bare_a - 1 / substratum_types) / (bare_a + 1 / substratum_types),"
"0","         cca_e = (cca_a - 1 / substratum_types) / (cca_a + 1 / substratum_types),"
"0","         ram_e = (ram_a - 1 / substratum_types) / (ram_a + 1 / substratum_types),"
"0","         spon_e = (spon_a - 1 / substratum_types) / (spon_a + 1 / substratum_types)) %>% #calculate electivities"
"0","  select(ends_with(c(""container"", ""e"")), -bare) #remove extraneous columns"
